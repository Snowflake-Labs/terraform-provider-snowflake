---
page_title: "snowflake_view Resource - terraform-provider-snowflake"
subcategory: "Stable"
description: |-
  Resource used to manage view objects. For more information, check view documentation https://docs.snowflake.com/en/sql-reference/sql/create-view.
---

!> Due to Snowflake limitations, to properly compute diff on `statement` field, the provider parses a `text` field which contains the whole CREATE query used to create the resource. We recommend not using special characters, especially `(`, `,`, `)` in any of the fields, if possible.

!> **Sensitive values** This resource's `statement` and `show_output.text` fields are not marked as sensitive in the provider. Ensure that no personal data, sensitive data, export-controlled data, or other regulated data is entered as metadata when using the provider. For more information, see [Sensitive values limitations](../#sensitive-values-limitations) and [Metadata fields in Snowflake](https://docs.snowflake.com/en/sql-reference/metadata).

~> **Note about copy_grants** Fields like `is_recursive`, `is_temporary`, `copy_grants` and `statement` can not be ALTERed on Snowflake side (check [docs](https://docs.snowflake.com/en/sql-reference/sql/alter-view)), and a change on these fields means recreation of the resource. ForceNew can not be used because it does not preserve grants from `copy_grants`. Beware that even though a change is marked as update, the resource is recreated.

~> **Required warehouse** For this resource, the provider uses [policy references](https://docs.snowflake.com/en/sql-reference/functions/policy_references) and [data metric function references](https://docs.snowflake.com/en/sql-reference/functions/data_metric_function_references) which requires a warehouse in the connection. Please, make sure you have either set a `DEFAULT_WAREHOUSE` for the user, or specified a warehouse in the provider configuration.

# snowflake_view (Resource)

Resource used to manage view objects. For more information, check [view documentation](https://docs.snowflake.com/en/sql-reference/sql/create-view).

## Example Usage

```terraform
# basic resource
resource "snowflake_view" "view" {
  database  = "database"
  schema    = "schema"
  name      = "view"
  statement = <<-SQL
    select * from foo;
SQL
}

# recursive view
resource "snowflake_view" "view" {
  database     = "database"
  schema       = "schema"
  name         = "view"
  is_recursive = "true"
  statement    = <<-SQL
    select * from foo;
SQL
}
# resource with attached policies, columns and data metric functions
resource "snowflake_view" "test" {
  database        = "database"
  schema          = "schema"
  name            = "view"
  comment         = "comment"
  is_secure       = "true"
  change_tracking = "true"
  is_temporary    = "true"
  column {
    column_name = "id"
    comment     = "column comment"
  }
  column {
    column_name = "address"
    projection_policy {
      policy_name = "projection_policy"
    }
    masking_policy {
      policy_name = snowflake_masking_policy.example.fully_qualified_name
      using       = ["address"]
    }
  }
  row_access_policy {
    policy_name = snowflake_row_access_policy.example.fully_qualified_name
    on          = ["id"]
  }
  aggregation_policy {
    policy_name = "aggregation_policy"
    entity_key  = ["id"]
  }
  data_metric_function {
    function_name   = "data_metric_function"
    on              = ["id"]
    schedule_status = "STARTED"
  }
  data_metric_schedule {
    using_cron = "15 * * * * UTC"
  }
  statement = <<-SQL
    SELECT id, address FROM TABLE;
SQL
}
```
-> **Note** Instead of using fully_qualified_name, you can reference objects managed outside Terraform by constructing a correct ID, consult [identifiers guide](../guides/identifiers_rework_design_decisions#new-computed-fully-qualified-name-field-in-resources).
<!-- TODO(SNOW-1634854): include an example showing both methods-->

-> **Note** If a field has a default value, it is shown next to the type in the schema.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `database` (String) The database in which to create the view. Due to technical limitations (read more [here](../guides/identifiers_rework_design_decisions#known-limitations-and-identifier-recommendations)), avoid using the following characters: `|`, `.`, `"`.
- `name` (String) Specifies the identifier for the view; must be unique for the schema in which the view is created. Due to technical limitations (read more [here](../guides/identifiers_rework_design_decisions#known-limitations-and-identifier-recommendations)), avoid using the following characters: `|`, `.`, `"`.
- `schema` (String) The schema in which to create the view. Due to technical limitations (read more [here](../guides/identifiers_rework_design_decisions#known-limitations-and-identifier-recommendations)), avoid using the following characters: `|`, `.`, `"`.
- `statement` (String) Specifies the query used to create the view. To mitigate permadiff on this field, the provider replaces blank characters with a space. This can lead to false positives in cases where a change in case or run of whitespace is semantically significant.

### Optional

- `aggregation_policy` (Block List, Max: 1) Specifies the aggregation policy to set on a view. (see [below for nested schema](#nestedblock--aggregation_policy))
- `change_tracking` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies to enable or disable change tracking on the table. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `column` (Block List) If you want to change the name of a column or add a comment to a column in the new view, include a column list that specifies the column names and (if needed) comments about the columns. You do not need to specify the data types of the columns. If this field is not specified, columns are inferred from the `statement` field by Snowflake. (see [below for nested schema](#nestedblock--column))
- `comment` (String) Specifies a comment for the view.
- `copy_grants` (Boolean) (Default: `false`) Retains the access permissions from the original view when a view is recreated using the OR REPLACE clause. This is used when the provider detects changes for fields that can not be changed by ALTER. This value will not have any effect during creating a new object with Terraform.
- `data_metric_function` (Block Set) Data metric functions used for the view. (see [below for nested schema](#nestedblock--data_metric_function))
- `data_metric_schedule` (Block List, Max: 1) Specifies the schedule to run the data metric functions periodically. (see [below for nested schema](#nestedblock--data_metric_schedule))
- `is_recursive` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies that the view can refer to itself using recursive syntax without necessarily using a CTE (common table expression). Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `is_secure` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies that the view is secure. By design, the Snowflake's `SHOW VIEWS` command does not provide information about secure views (consult [view usage notes](https://docs.snowflake.com/en/sql-reference/sql/create-view#usage-notes)) which is essential to manage/import view with Terraform. Use the role owning the view while managing secure views. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `is_temporary` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies that the view persists only for the duration of the session that you created it in. A temporary view and all its contents are dropped at the end of the session. In context of this provider, it means that it's dropped after a Terraform operation. This results in a permanent plan with object creation. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `row_access_policy` (Block List, Max: 1) Specifies the row access policy to set on a view. (see [below for nested schema](#nestedblock--row_access_policy))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `describe_output` (List of Object) Outputs the result of `DESCRIBE VIEW` for the given view. (see [below for nested schema](#nestedatt--describe_output))
- `fully_qualified_name` (String) Fully qualified name of the resource. For more information, see [object name resolution](https://docs.snowflake.com/en/sql-reference/name-resolution).
- `id` (String) The ID of this resource.
- `show_output` (List of Object) Outputs the result of `SHOW VIEW` for the given view. (see [below for nested schema](#nestedatt--show_output))

<a id="nestedblock--aggregation_policy"></a>
### Nested Schema for `aggregation_policy`

Required:

- `policy_name` (String) Aggregation policy name.

Optional:

- `entity_key` (Set of String) Defines which columns uniquely identify an entity within the view.


<a id="nestedblock--column"></a>
### Nested Schema for `column`

Required:

- `column_name` (String) Specifies affected column name.

Optional:

- `comment` (String) Specifies a comment for the column.
- `masking_policy` (Block List, Max: 1) (see [below for nested schema](#nestedblock--column--masking_policy))
- `projection_policy` (Block List, Max: 1) (see [below for nested schema](#nestedblock--column--projection_policy))

<a id="nestedblock--column--masking_policy"></a>
### Nested Schema for `column.masking_policy`

Required:

- `policy_name` (String) Specifies the masking policy to set on a column. For more information about this resource, see [docs](./masking_policy).

Optional:

- `using` (List of String) Specifies the arguments to pass into the conditional masking policy SQL expression. The first column in the list specifies the column for the policy conditions to mask or tokenize the data and must match the column to which the masking policy is set. The additional columns specify the columns to evaluate to determine whether to mask or tokenize the data in each row of the query result when a query is made on the first column. If the USING clause is omitted, Snowflake treats the conditional masking policy as a normal masking policy.


<a id="nestedblock--column--projection_policy"></a>
### Nested Schema for `column.projection_policy`

Required:

- `policy_name` (String) Specifies the projection policy to set on a column.



<a id="nestedblock--data_metric_function"></a>
### Nested Schema for `data_metric_function`

Required:

- `function_name` (String) Identifier of the data metric function to add to the table or view or drop from the table or view. This function identifier must be provided without arguments in parenthesis.
- `on` (Set of String) The table or view columns on which to associate the data metric function. The data types of the columns must match the data types of the columns specified in the data metric function definition.
- `schedule_status` (String) The status of the metrics association. Valid values are: `STARTED` | `SUSPENDED`. When status of a data metric function is changed, it is being reassigned with `DROP DATA METRIC FUNCTION` and `ADD DATA METRIC FUNCTION`, and then its status is changed by `MODIFY DATA METRIC FUNCTION`


<a id="nestedblock--data_metric_schedule"></a>
### Nested Schema for `data_metric_schedule`

Optional:

- `minutes` (Number) Specifies an interval (in minutes) of wait time inserted between runs of the data metric function. Conflicts with `using_cron`. Valid values are: `5` | `15` | `30` | `60` | `720` | `1440`. Due to Snowflake limitations, changes in this field are not managed by the provider. Please consider using [taint](https://developer.hashicorp.com/terraform/cli/commands/taint) command, `using_cron` field, or [replace_triggered_by](https://developer.hashicorp.com/terraform/language/meta-arguments/lifecycle#replace_triggered_by) metadata argument.
- `using_cron` (String) Specifies a cron expression and time zone for periodically running the data metric function. Supports a subset of standard cron utility syntax. Conflicts with `minutes`.


<a id="nestedblock--row_access_policy"></a>
### Nested Schema for `row_access_policy`

Required:

- `on` (Set of String) Defines which columns are affected by the policy.
- `policy_name` (String) Row access policy name. For more information about this resource, see [docs](./row_access_policy).


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)


<a id="nestedatt--describe_output"></a>
### Nested Schema for `describe_output`

Read-Only:

- `check` (String)
- `comment` (String)
- `default` (String)
- `expression` (String)
- `is_nullable` (Boolean)
- `is_primary` (Boolean)
- `is_unique` (Boolean)
- `kind` (String)
- `name` (String)
- `policy_name` (String)
- `privacy_domain` (String)
- `type` (String)


<a id="nestedatt--show_output"></a>
### Nested Schema for `show_output`

Read-Only:

- `change_tracking` (String)
- `comment` (String)
- `created_on` (String)
- `database_name` (String)
- `is_materialized` (Boolean)
- `is_secure` (Boolean)
- `kind` (String)
- `name` (String)
- `owner` (String)
- `owner_role_type` (String)
- `reserved` (String)
- `schema_name` (String)
- `text` (String)

## Import

Import is supported using the following syntax:

```shell
terraform import snowflake_view.example '"<database_name>"."<schema_name>"."<view_name>"'
```
