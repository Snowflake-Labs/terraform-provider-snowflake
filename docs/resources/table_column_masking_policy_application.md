---
page_title: "snowflake_table_column_masking_policy_application Resource - terraform-provider-snowflake"
subcategory: "Preview"
description: |-
  Applies a masking policy to a table column.
---

!> **Caution: Preview Feature** This feature is considered a preview feature in the provider, regardless of the state of the resource in Snowflake. We do not guarantee its stability. It will be reworked and marked as a stable feature in future releases. Breaking changes are expected, even without bumping the major version. To use this feature, add the relevant feature name to `preview_features_enabled field` in the [provider configuration](https://registry.terraform.io/providers/Snowflake-Labs/snowflake/latest/docs#schema). Please always refer to the [Getting Help](https://github.com/Snowflake-Labs/terraform-provider-snowflake?tab=readme-ov-file#getting-help) section in our Github repo to best determine how to get help for your questions.

# snowflake_table_column_masking_policy_application (Resource)

Applies a masking policy to a table column.

Only one masking policy may be applied per table column, hence only one `snowflake_table_column_masking_policy_application` resources may be present per table column.
Using two or more `snowflake_table_column_masking_policy_application` resources for the same table column will result in the last one overriding any previously applied masking policies and unresolvable diffs in Terraform plan.

When using this resource to manage a table column's masking policy make sure to ignore changes to the column's masking policy in the table definition, otherwise the two resources would conflict. See example below.

## Example Usage

```terraform
# Default provider for most resources
provider "snowflake" {
  role = "SYSADMIN"
}

# Alternative provider with masking_admin role
provider "snowflake" {
  alias = "masking"
  role  = "MASKING_ADMIN"
}

resource "snowflake_masking_policy" "policy" {
  provider = snowflake.masking # Create masking policy with masking_admin role

  name               = "EXAMPLE_MASKING_POLICY"
  database           = "EXAMPLE_DB"
  schema             = "EXAMPLE_SCHEMA"
  value_data_type    = "VARCHAR"
  masking_expression = "case when current_role() in ('ANALYST') then val else sha2(val, 512) end"
  return_data_type   = "VARCHAR"
}

# Table is created by the default provider
resource "snowflake_table" "table" {
  database = "EXAMPLE_DB"
  schema   = "EXAMPLE_SCHEMA"
  name     = "table"

  column {
    name = "secret"
    type = "VARCHAR(16777216)"
  }

  lifecycle {
    # Masking policy is managed by a standalone resource and shouldn't be changed by the table resource.
    ignore_changes = [column[0].masking_policy]
  }
}

resource "snowflake_table_column_masking_policy_application" "application" {
  provider = snowflake.masking # Apply masking policy with masking_admin role

  table          = snowflake_table.table.fully_qualified_name
  column         = "secret"
  masking_policy = snowflake_masking_policy.policy.fully_qualified_name
}
```
-> **Note** Instead of using fully_qualified_name, you can reference objects managed outside Terraform by constructing a correct ID, consult [identifiers guide](../guides/identifiers_rework_design_decisions#new-computed-fully-qualified-name-field-in-resources).
<!-- TODO(SNOW-1634854): include an example showing both methods-->


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `column` (String) The column to apply the masking policy to.
- `masking_policy` (String) Fully qualified name (`database.schema.policyname`) of the policy to apply.
- `table` (String) The fully qualified name (`database.schema.table`) of the table to apply the masking policy to.

### Read-Only

- `id` (String) The ID of this resource.
