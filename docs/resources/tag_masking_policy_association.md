---
page_title: "snowflake_tag_masking_policy_association Resource - terraform-provider-snowflake"
subcategory: ""
description: |-
  Attach a masking policy to a tag. Requires a current warehouse to be set. Either with SNOWFLAKE_WAREHOUSE env variable or in current session. If no warehouse is provided, a temporary warehouse will be created.
---

# snowflake_tag_masking_policy_association (Resource)

Attach a masking policy to a tag. Requires a current warehouse to be set. Either with SNOWFLAKE_WAREHOUSE env variable or in current session. If no warehouse is provided, a temporary warehouse will be created.


## Example Usage

```terraform
# Note: Currently this feature is only available to accounts that are Enterprise Edition (or higher)

resource "snowflake_database" "test" {
  name                        = "TEST_DB1"
  data_retention_time_in_days = 1
}

resource "snowflake_database" "test2" {
  name                        = "TEST_DB2"
  data_retention_time_in_days = 1
}


resource "snowflake_schema" "test2" {
  database            = snowflake_database.test2.name
  name                = "FOOBAR2"
  data_retention_days = snowflake_database.test2.data_retention_time_in_days
}

resource "snowflake_schema" "test" {
  database            = snowflake_database.test.name
  name                = "FOOBAR"
  data_retention_days = snowflake_database.test.data_retention_time_in_days
}

resource "snowflake_tag" "this" {
  name     = upper("test_tag")
  database = snowflake_database.test2.name
  schema   = snowflake_schema.test2.name
}

resource "snowflake_masking_policy" "example_masking_policy" {
  name               = "EXAMPLE_MASKING_POLICY"
  database           = snowflake_database.test.name
  schema             = snowflake_schema.test.name
  value_data_type    = "string"
  masking_expression = "case when current_role() in ('ACCOUNTADMIN') then val else sha2(val, 512) end"
  return_data_type   = "string"
}

resource "snowflake_tag_masking_policy_association" "name" {
  tag_id            = snowflake_tag.this.fully_qualified_name
  masking_policy_id = snowflake_masking_policy.example_masking_policy.fully_qualified_name
}
```

-> **Note** If you don't manage referenced objects in Terraform, you can construct the proper id yourself, consult [identifiers guide](../guides/identifiers#new-computed-fully-qualified-name-field-in-resources)

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `masking_policy_id` (String) The resource id of the masking policy
- `tag_id` (String) Specifies the identifier for the tag. Note: format must follow: "databaseName"."schemaName"."tagName" or "databaseName.schemaName.tagName" or "databaseName|schemaName.tagName" (snowflake_tag.tag.id)

### Read-Only

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

```shell
# format is tag database name | tag schema name | tag name | masking policy database | masking policy schema | masking policy name
terraform import snowflake_tag_masking_policy_association.example 'tag_db|tag_schema|tag_name|mp_db|mp_schema|mp_name'
```
