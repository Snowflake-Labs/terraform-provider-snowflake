---
page_title: "snowflake_roles Data Source - terraform-provider-snowflake"
subcategory: ""
description: |-
  Data source used to get details of filtered roles. Filtering is aligned with the current possibilities for SHOW ROLES https://docs.snowflake.com/en/sql-reference/sql/show-roles query (like and in_class are all supported). The results of SHOW are encapsulated in one output collection.
---

!> **V1 release candidate** This datasource was reworked and is a release candidate for the V1. We do not expect significant changes in it before the V1. We will welcome any feedback and adjust the data source if needed. Any errors reported will be resolved with a higher priority. We encourage checking this data source out before the V1 release. Please follow the [migration guide](https://github.com/Snowflake-Labs/terraform-provider-snowflake/blob/main/MIGRATION_GUIDE.md#v0920--v0930) to use it.

<!-- TODO(SNOW-1844996): Remove this note.-->
-> **Note** Fields `STARTS WITH` and `LIMIT` are currently missing. They will be added in the future.

# snowflake_roles (Data Source)

Data source used to get details of filtered roles. Filtering is aligned with the current possibilities for [SHOW ROLES](https://docs.snowflake.com/en/sql-reference/sql/show-roles) query (`like` and `in_class` are all supported). The results of SHOW are encapsulated in one output collection.

## Example Usage

```terraform
# Simple usage
data "snowflake_roles" "simple" {
}

output "simple_output" {
  value = data.snowflake_roles.simple.roles
}

# Filtering (like)
data "snowflake_roles" "like" {
  like = "role-name"
}

output "like_output" {
  value = data.snowflake_roles.like.roles
}

# Filtering (in class)
data "snowflake_roles" "in_class" {
  in_class = "SNOWFLAKE.CORE.BUDGET"
}

output "in_class_output" {
  value = data.snowflake_roles.in_class.roles
}

# Ensure the number of roles is equal to at least one element (with the use of postcondition)
data "snowflake_roles" "assert_with_postcondition" {
  like = "role-name-%"
  lifecycle {
    postcondition {
      condition     = length(self.roles) > 0
      error_message = "there should be at least one role"
    }
  }
}

# Ensure the number of roles is equal to at exactly one element (with the use of check block)
check "role_check" {
  data "snowflake_roles" "assert_with_check_block" {
    like = "role-name"
  }

  assert {
    condition     = length(data.snowflake_roles.assert_with_check_block.roles) == 1
    error_message = "Roles filtered by '${data.snowflake_roles.assert_with_check_block.like}' returned ${length(data.snowflake_roles.assert_with_check_block.roles)} roles where one was expected"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `in_class` (String) Filters the SHOW GRANTS output by class name.
- `like` (String) Filters the output with **case-insensitive** pattern, with support for SQL wildcard characters (`%` and `_`).

### Read-Only

- `id` (String) The ID of this resource.
- `roles` (List of Object) Holds the aggregated output of all role details queries. (see [below for nested schema](#nestedatt--roles))

<a id="nestedatt--roles"></a>
### Nested Schema for `roles`

Read-Only:

- `show_output` (List of Object) (see [below for nested schema](#nestedobjatt--roles--show_output))

<a id="nestedobjatt--roles--show_output"></a>
### Nested Schema for `roles.show_output`

Read-Only:

- `assigned_to_users` (Number)
- `comment` (String)
- `created_on` (String)
- `granted_roles` (Number)
- `granted_to_roles` (Number)
- `is_current` (Boolean)
- `is_default` (Boolean)
- `is_inherited` (Boolean)
- `name` (String)
- `owner` (String)
